<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>Svg editor</title>
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
	<svg id="svgContainer" width="400" height="400"></svg>

	<script type="text/javascript" src="/SvgEditor.umd.js"></script>
	<script type="text/javascript">
		const svgContainer = document.getElementById('svgContainer');
		const {
			createSvgEditor,
			initialState,
			stateToSvg,
			addElement,
			setElementParameters,
			addElementParameters,
			stateToSvgMapper
		} = SvgEditor;
		const svgEditor = createSvgEditor(
			initialState(
				stateToSvg(svgContainer, stateToSvgMapper)
			)
		);

		const newRect = {
			type: 'rect',
			x: 10,
			y: 10,
			width: 10,
			height: 10,
			fill: 'red'
		};

		const newellipse = {
			type: 'ellipse',
			x: 100,
			y: 10,
			width: 80,
			height: 40,
			fill: 'green'
		};

		const newCircle = {
			type: 'circle',
			x: 120,
			y: 80,
			width: 50,
			height: 50,
			fill: 'blue'
		};

		const newLine = svgEditor(addElement)({
			type: 'line',
			x: 200,
			y: 20,
			width: 10,
			height: 50,
			stroke: 'orange'
		});

		const newPolygon = svgEditor(addElement)({
			type: 'polygon',
			points: '100,100 150,25 150,75,200,0',
			x: 20,
			y: 120,
			width: 80,
			height: 80,
			fill: 'rosybrown'
		});

		const newPolyline = svgEditor(addElement)({
			type: 'polyline',
			domId: 'testPolyline',
			class: 'polyline',
			points: '0,100 50,25 50,75 100,0',
			x: 220,
			y: 20,
			width: 40,
			height: 120,
			fill: 'none',
			stroke: 'darkmagenta'
		});

		const newGroup = svgEditor(addElement)({
			type: 'group',
			domId: 'testGroup',
			class: 'group',
			children: [newRect, newellipse, newCircle]
		});
		console.log('newGroup: ', newGroup);

		svgEditor(setElementParameters)({
			id: newGroup.id,
			y: 50
		});

		for (let i = 1; i <= 5; i++) {
			setTimeout(
				() => {
					svgEditor(addElementParameters)({
						id: newGroup.id,
						y: 5,
						width: 5,
						height: 5
					});
				},
				i * 100
			);
		}
	</script>
</body>

</html>